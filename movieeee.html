<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Ticket Booking</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: pink;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 20px;
    }

    select, button {
      padding: 10px;
      font-size: 16px;
      margin: 10px 0;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(8, 40px);
      gap: 10px;
      margin-top: 20px;
    }

    .seat {
      background-color: #444;
      height: 40px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    .seat.selected {
      background-color: #6feaf6;
    }

    .seat.occupied {
      background-color: #fff;
      cursor: not-allowed;
    }

    .screen {
      background-color: #fff;
      height: 20px;
      width: 100%;
      margin: 20px 0;
      border-radius: 5px;
    }

    .legend {
      margin-top: 20px;
    }

    .legend span {
      display: inline-block;
      width: 20px;
      height: 20px;
      margin-right: 5px;
      vertical-align: middle;
    }

    #total {
      margin-top: 20px;
      font-size: 18px;
    }

    #bookBtn {
      background: #28a745;
      color: white;
      border: none;
      margin-top: 20px;
    }

  </style>
</head>
<body>

  <h1>ðŸŽ¬ Movie Ticket Booking</h1>

  <label for="movie">Choose a Movie:</label>
  <select id="movie">
    <option value="10">Hari hara vera mallu (550)</option>
    <option value="12">Salaarrr (450)</option>
    <option value="8">Kingdom (350)</option>
  </select>

  <div class="screen">SCREEN</div>

  <div class="container" id="seatsContainer">
    <!-- Seats will be generated by JS -->
  </div>

  <div class="legend">
    <p><span style="background:#444;"></span> Available</p>
    <p><span style="background:#6feaf6;"></span> Selected</p>
    <p><span style="background:#fff;"></span> Occupied</p>
  </div>

  <div id="total">You have selected <span id="count">0</span> seats. Total: $<span id="amount">0</span></div>

  <button id="bookBtn">Book Now</button>

  <script>
    const container = document.getElementById('seatsContainer');
    const movieSelect = document.getElementById('movie');
    const count = document.getElementById('count');
    const amount = document.getElementById('amount');
    const bookBtn = document.getElementById('bookBtn');

    const rows = 5;
    const cols = 8;

    let ticketPrice = +movieSelect.value;

    // Generate seats
    function generateSeats() {
      for (let i = 0; i < rows * cols; i++) {
        const seat = document.createElement('div');
        seat.classList.add('seat');
        // Randomly make some seats occupied
        if (Math.random() < 0.2) {
          seat.classList.add('occupied');
        }
        container.appendChild(seat);
      }
    }

    generateSeats();

    // Update selected count and total
    function updateSelectedCount() {
      const selectedSeats = document.querySelectorAll('.container .seat.selected');
      const selectedCount = selectedSeats.length;
      count.textContent = selectedCount;
      amount.textContent = selectedCount * ticketPrice;
    }

    // Seat click
    container.addEventListener('click', (e) => {
      if (e.target.classList.contains('seat') &&
          !e.target.classList.contains('occupied')) {
        e.target.classList.toggle('selected');
        updateSelectedCount();
      }
    });

    // Movie change
    movieSelect.addEventListener('change', (e) => {
      ticketPrice = +e.target.value;
      updateSelectedCount();
    });

    // Book button
    bookBtn.addEventListener('click', () => {
      const selectedSeats = document.querySelectorAll('.container .seat.selected');
      if (selectedSeats.length === 0) {
        alert('Please select at least one seat!');
        return;
      }

      selectedSeats.forEach(seat => {
        seat.classList.remove('selected');
        seat.classList.add('occupied');
      });

      updateSelectedCount();
      alert('ðŸŽ‰ Tickets booked successfully!');
    });

  </script>
</body>
</html>
